-- NOTICE: This migration does minimal type inference and creates missing columns as TEXT/JSONB/NUMERIC/BOOLEAN/DATE when possible.
-- Migration gerada automaticamente para importar fixtures (merge/upsert)
-- Geração: 2025-12-17T00:52:13.284Z

CREATE TABLE IF NOT EXISTS destinations (id TEXT PRIMARY KEY);
ALTER TABLE destinations ADD COLUMN IF NOT EXISTS name TEXT;
ALTER TABLE destinations ADD COLUMN IF NOT EXISTS address TEXT;
ALTER TABLE destinations ADD COLUMN IF NOT EXISTS phone TEXT;
INSERT INTO destinations (id,name,address,phone) VALUES ($$1$$,$$Hospital do Câncer Aldenora Bello$$,$$São Luís - Monte Castelo$$,$$(98) 3000-0000$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,address = EXCLUDED.address,phone = EXCLUDED.phone;
INSERT INTO destinations (id,name,address,phone) VALUES ($$2$$,$$Clínica de Nefrologia de Caxias$$,$$Caxias - Centro$$,$$(99) 3500-0000$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,address = EXCLUDED.address,phone = EXCLUDED.phone;
INSERT INTO destinations (id,name,address,phone) VALUES ($$3$$,$$HGM - Hospital Geral Municipal$$,$$Codó - Centro$$,$$(99) 3661-0000$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,address = EXCLUDED.address,phone = EXCLUDED.phone;
INSERT INTO destinations (id,name,address,phone) VALUES ($$4$$,$$HGT - Hospital Geral de Timbiras$$,$$Timbiras - Centro$$,$$(99) 3668-1000$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,address = EXCLUDED.address,phone = EXCLUDED.phone;
INSERT INTO destinations (id,name,address,phone) VALUES ($$5$$,$$Casa de Apoio Ninar$$,$$São Luís - Ponta d'Areia$$,$$(98) 3200-0000$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,address = EXCLUDED.address,phone = EXCLUDED.phone;
INSERT INTO destinations (id,name,address,phone) VALUES ($$6$$,$$H. Macrorregional de Coroatá$$,$$Coroatá - MA$$,$$(99) 3641-0000$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,address = EXCLUDED.address,phone = EXCLUDED.phone;

CREATE TABLE IF NOT EXISTS treatment_types (id TEXT PRIMARY KEY);
ALTER TABLE treatment_types ADD COLUMN IF NOT EXISTS name TEXT;
ALTER TABLE treatment_types ADD COLUMN IF NOT EXISTS specialist_name TEXT;
ALTER TABLE treatment_types ADD COLUMN IF NOT EXISTS notes TEXT;
ALTER TABLE treatment_types ADD COLUMN IF NOT EXISTS default_destination_id TEXT;
INSERT INTO treatment_types (id,name,specialist_name,notes,default_destination_id) VALUES ($$1$$,$$Hemodiálise$$,$$Dr. Marcelo (Nefrologista)$$,$$Sessões Ter/Qui/Sáb$$,$$2$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,specialist_name = EXCLUDED.specialist_name,notes = EXCLUDED.notes,default_destination_id = EXCLUDED.default_destination_id;
INSERT INTO treatment_types (id,name,specialist_name,notes,default_destination_id) VALUES ($$2$$,$$Oncologia$$,$$Dr. Tarquínio$$,$$Quimioterapia e Radioterapia$$,$$1$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,specialist_name = EXCLUDED.specialist_name,notes = EXCLUDED.notes,default_destination_id = EXCLUDED.default_destination_id;
INSERT INTO treatment_types (id,name,specialist_name,notes,default_destination_id) VALUES ($$3$$,$$Ortopedia$$,$$Dr. Osmar$$,$$Cirurgias Eletivas$$,$$4$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,specialist_name = EXCLUDED.specialist_name,notes = EXCLUDED.notes,default_destination_id = EXCLUDED.default_destination_id;
INSERT INTO treatment_types (id,name,specialist_name,notes,default_destination_id) VALUES ($$4$$,$$Oftalmologia$$,$$Dr. Carlos (Cirurgião)$$,$$Mutirão da Catarata$$,$$3$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,specialist_name = EXCLUDED.specialist_name,notes = EXCLUDED.notes,default_destination_id = EXCLUDED.default_destination_id;
INSERT INTO treatment_types (id,name,specialist_name,notes,default_destination_id) VALUES ($$5$$,$$Neuropediatria$$,$$Dra. Juliana$$,$$Avaliação de desenvolvimento$$,$$5$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,specialist_name = EXCLUDED.specialist_name,notes = EXCLUDED.notes,default_destination_id = EXCLUDED.default_destination_id;

CREATE TABLE IF NOT EXISTS support_houses (id TEXT PRIMARY KEY);
ALTER TABLE support_houses ADD COLUMN IF NOT EXISTS name TEXT;
ALTER TABLE support_houses ADD COLUMN IF NOT EXISTS address TEXT;
ALTER TABLE support_houses ADD COLUMN IF NOT EXISTS phone TEXT;
ALTER TABLE support_houses ADD COLUMN IF NOT EXISTS daily_cost INTEGER;
ALTER TABLE support_houses ADD COLUMN IF NOT EXISTS capacity INTEGER;
INSERT INTO support_houses (id,name,address,phone,daily_cost,capacity) VALUES ($$1$$,$$Casa de Apoio Coroatá em SLZ$$,$$Rua das Mangueiras, Renascença, São Luís$$,$$(98) 3232-1010$$,65,25) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,address = EXCLUDED.address,phone = EXCLUDED.phone,daily_cost = EXCLUDED.daily_cost,capacity = EXCLUDED.capacity;
INSERT INTO support_houses (id,name,address,phone,daily_cost,capacity) VALUES ($$2$$,$$Pousada do Rim (Caxias)$$,$$Av. Volta Redonda, Caxias$$,$$(99) 3521-2020$$,40,15) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,address = EXCLUDED.address,phone = EXCLUDED.phone,daily_cost = EXCLUDED.daily_cost,capacity = EXCLUDED.capacity;

CREATE TABLE IF NOT EXISTS drivers (id TEXT PRIMARY KEY);
ALTER TABLE drivers ADD COLUMN IF NOT EXISTS name TEXT;
ALTER TABLE drivers ADD COLUMN IF NOT EXISTS document TEXT;
ALTER TABLE drivers ADD COLUMN IF NOT EXISTS cnh TEXT;
ALTER TABLE drivers ADD COLUMN IF NOT EXISTS phone TEXT;
ALTER TABLE drivers ADD COLUMN IF NOT EXISTS active BOOLEAN;
INSERT INTO drivers (id,name,document,cnh,phone,active) VALUES ($$d1$$,$$SEU ZÉ (JOSÉ ALMEIDA)$$,$$12345$$,$$11111111111$$,$$(99) 99111-1111$$,true) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,document = EXCLUDED.document,cnh = EXCLUDED.cnh,phone = EXCLUDED.phone,active = EXCLUDED.active;
INSERT INTO drivers (id,name,document,cnh,phone,active) VALUES ($$d2$$,$$DONA LÚCIA$$,$$67890$$,$$22222222222$$,$$(99) 99222-2222$$,true) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,document = EXCLUDED.document,cnh = EXCLUDED.cnh,phone = EXCLUDED.phone,active = EXCLUDED.active;
INSERT INTO drivers (id,name,document,cnh,phone,active) VALUES ($$d3$$,$$ROBERTO CARLOS$$,$$54321$$,$$33333333333$$,$$(99) 99333-3333$$,true) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,document = EXCLUDED.document,cnh = EXCLUDED.cnh,phone = EXCLUDED.phone,active = EXCLUDED.active;

CREATE TABLE IF NOT EXISTS vehicles (id TEXT PRIMARY KEY);
ALTER TABLE vehicles ADD COLUMN IF NOT EXISTS model TEXT;
ALTER TABLE vehicles ADD COLUMN IF NOT EXISTS plate TEXT;
ALTER TABLE vehicles ADD COLUMN IF NOT EXISTS capacity INTEGER;
ALTER TABLE vehicles ADD COLUMN IF NOT EXISTS status TEXT;
INSERT INTO vehicles (id,model,plate,capacity,status) VALUES ($$v1$$,$$Van Renault Master$$,$$PTA-2024$$,15,$$active$$) ON CONFLICT (id) DO UPDATE SET model = EXCLUDED.model,plate = EXCLUDED.plate,capacity = EXCLUDED.capacity,status = EXCLUDED.status;
INSERT INTO vehicles (id,model,plate,capacity,status) VALUES ($$v2$$,$$Micro-ônibus Volare$$,$$COR-5050$$,26,$$active$$) ON CONFLICT (id) DO UPDATE SET model = EXCLUDED.model,plate = EXCLUDED.plate,capacity = EXCLUDED.capacity,status = EXCLUDED.status;
INSERT INTO vehicles (id,model,plate,capacity,status) VALUES ($$v3$$,$$Fiat Spin$$,$$OAB-1234$$,6,$$active$$) ON CONFLICT (id) DO UPDATE SET model = EXCLUDED.model,plate = EXCLUDED.plate,capacity = EXCLUDED.capacity,status = EXCLUDED.status;
INSERT INTO vehicles (id,model,plate,capacity,status) VALUES ($$v4$$,$$Ambulância UTI$$,$$SAMU-192$$,2,$$maintenance$$) ON CONFLICT (id) DO UPDATE SET model = EXCLUDED.model,plate = EXCLUDED.plate,capacity = EXCLUDED.capacity,status = EXCLUDED.status;

CREATE TABLE IF NOT EXISTS patients (id TEXT PRIMARY KEY);
ALTER TABLE patients ADD COLUMN IF NOT EXISTS name TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS cpf TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS birth_date DATE;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS sus_card TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS phone TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS status TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS is_tfd BOOLEAN;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS address TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS neighborhood TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS city TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS reference_point TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS emergency_contact TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS medical_notes TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS allows_companion BOOLEAN;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS companion_name TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS companion_cpf TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS allows_second_companion BOOLEAN;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS second_companion_name TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS second_companion_cpf TEXT;
ALTER TABLE patients ADD COLUMN IF NOT EXISTS second_companion_justification TEXT;
INSERT INTO patients (id,name,cpf,birth_date,sus_card,phone,status,is_tfd,address,neighborhood,city,reference_point,emergency_contact,medical_notes,allows_companion,companion_name,companion_cpf,allows_second_companion) VALUES ($$p1$$,$$ANTÔNIO RAIMUNDO SILVA$$,$$123.111.222-33$$,$$1955-05-20$$,$$700000000000001$$,$$(99) 98111-0001$$,$$active$$,true,$$Rua do Sol, 45$$,$$Centro$$,$$Coroatá$$,$$Perto do Banco do Brasil$$,$$Maria (Esposa)$$,$$Hemodiálise crônica. Cadeira de rodas.$$,true,$$MARIA SILVA$$,$$987.654.321-00$$,false) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,cpf = EXCLUDED.cpf,birth_date = EXCLUDED.birth_date,sus_card = EXCLUDED.sus_card,phone = EXCLUDED.phone,status = EXCLUDED.status,is_tfd = EXCLUDED.is_tfd,address = EXCLUDED.address,neighborhood = EXCLUDED.neighborhood,city = EXCLUDED.city,reference_point = EXCLUDED.reference_point,emergency_contact = EXCLUDED.emergency_contact,medical_notes = EXCLUDED.medical_notes,allows_companion = EXCLUDED.allows_companion,companion_name = EXCLUDED.companion_name,companion_cpf = EXCLUDED.companion_cpf,allows_second_companion = EXCLUDED.allows_second_companion;
INSERT INTO patients (id,name,cpf,birth_date,sus_card,phone,status,is_tfd,address,neighborhood,city,reference_point,emergency_contact,medical_notes,allows_companion) VALUES ($$p2$$,$$JOSEFA PEREIRA SANTOS$$,$$222.333.444-55$$,$$1960-08-15$$,$$700000000000002$$,$$(99) 98222-0002$$,$$active$$,true,$$Av. Central, 100$$,$$Americanos$$,$$Coroatá$$,$$Prox. Escola$$,$$Pedro (Filho)$$,$$Hemodiálise. Hipertensa.$$,false) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,cpf = EXCLUDED.cpf,birth_date = EXCLUDED.birth_date,sus_card = EXCLUDED.sus_card,phone = EXCLUDED.phone,status = EXCLUDED.status,is_tfd = EXCLUDED.is_tfd,address = EXCLUDED.address,neighborhood = EXCLUDED.neighborhood,city = EXCLUDED.city,reference_point = EXCLUDED.reference_point,emergency_contact = EXCLUDED.emergency_contact,medical_notes = EXCLUDED.medical_notes,allows_companion = EXCLUDED.allows_companion;
INSERT INTO patients (id,name,cpf,birth_date,sus_card,phone,status,is_tfd,address,neighborhood,city,reference_point,emergency_contact,medical_notes,allows_companion) VALUES ($$p3$$,$$CARLOS ALBERTO COSTA$$,$$333.444.555-66$$,$$1972-01-10$$,$$700000000000003$$,$$(99) 98333-0003$$,$$active$$,true,$$Rua Nova, 88$$,$$Trizidela$$,$$Coroatá$$,$$Bar do Zé$$,$$Clara (Irmã)$$,$$Hemodiálise.$$,false) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,cpf = EXCLUDED.cpf,birth_date = EXCLUDED.birth_date,sus_card = EXCLUDED.sus_card,phone = EXCLUDED.phone,status = EXCLUDED.status,is_tfd = EXCLUDED.is_tfd,address = EXCLUDED.address,neighborhood = EXCLUDED.neighborhood,city = EXCLUDED.city,reference_point = EXCLUDED.reference_point,emergency_contact = EXCLUDED.emergency_contact,medical_notes = EXCLUDED.medical_notes,allows_companion = EXCLUDED.allows_companion;
INSERT INTO patients (id,name,cpf,birth_date,sus_card,phone,status,is_tfd,address,neighborhood,city,reference_point,emergency_contact,medical_notes,allows_companion,companion_name,companion_cpf,allows_second_companion,second_companion_name,second_companion_cpf,second_companion_justification) VALUES ($$p4$$,$$LUCAS GABRIEL (CRIANÇA)$$,$$055.666.777-88$$,$$2019-03-25$$,$$700000000000004$$,$$(99) 98444-0004$$,$$active$$,true,$$Tv. da Paz, 12$$,$$Mocó$$,$$Coroatá$$,$$$$,$$Ana Paula (Mãe)$$,$$Leucemia. Tratamento no Aldenora Bello.$$,true,$$ANA PAULA SOUZA (MÃE)$$,$$000.000.000-11$$,true,$$JOSÉ SOUZA (PAI)$$,$$000.000.000-22$$,$$Laudo social: necessidade de suporte físico e emocional para a criança.$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,cpf = EXCLUDED.cpf,birth_date = EXCLUDED.birth_date,sus_card = EXCLUDED.sus_card,phone = EXCLUDED.phone,status = EXCLUDED.status,is_tfd = EXCLUDED.is_tfd,address = EXCLUDED.address,neighborhood = EXCLUDED.neighborhood,city = EXCLUDED.city,reference_point = EXCLUDED.reference_point,emergency_contact = EXCLUDED.emergency_contact,medical_notes = EXCLUDED.medical_notes,allows_companion = EXCLUDED.allows_companion,companion_name = EXCLUDED.companion_name,companion_cpf = EXCLUDED.companion_cpf,allows_second_companion = EXCLUDED.allows_second_companion,second_companion_name = EXCLUDED.second_companion_name,second_companion_cpf = EXCLUDED.second_companion_cpf,second_companion_justification = EXCLUDED.second_companion_justification;
INSERT INTO patients (id,name,cpf,birth_date,sus_card,phone,status,is_tfd,address,neighborhood,city,reference_point,emergency_contact,medical_notes,allows_companion,companion_name) VALUES ($$p5$$,$$RAIMUNDA NONATA LIMA$$,$$999.888.777-66$$,$$1948-12-01$$,$$700000000000005$$,$$(99) 98555-0005$$,$$active$$,true,$$Rua das Flores, 230$$,$$Centro$$,$$Coroatá$$,$$Mercado Municipal$$,$$Neto (Sobrinho)$$,$$Ca. Mama. Radioterapia.$$,true,$$RITA LIMA$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,cpf = EXCLUDED.cpf,birth_date = EXCLUDED.birth_date,sus_card = EXCLUDED.sus_card,phone = EXCLUDED.phone,status = EXCLUDED.status,is_tfd = EXCLUDED.is_tfd,address = EXCLUDED.address,neighborhood = EXCLUDED.neighborhood,city = EXCLUDED.city,reference_point = EXCLUDED.reference_point,emergency_contact = EXCLUDED.emergency_contact,medical_notes = EXCLUDED.medical_notes,allows_companion = EXCLUDED.allows_companion,companion_name = EXCLUDED.companion_name;
INSERT INTO patients (id,name,cpf,birth_date,sus_card,phone,status,is_tfd,address,neighborhood,city,reference_point,emergency_contact,medical_notes,allows_companion,companion_name) VALUES ($$p6$$,$$FRANCISCO DAS CHAGAS$$,$$777.111.222-33$$,$$1985-06-30$$,$$700000000000006$$,$$(99) 98666-0006$$,$$active$$,true,$$Rua do Arame, 50$$,$$Trizidela$$,$$Coroatá$$,$$$$,$$Socorro (Mãe)$$,$$Fratura de Fêmur. Retorno pós-cirúrgico.$$,true,$$SOCORRO CHAGAS$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,cpf = EXCLUDED.cpf,birth_date = EXCLUDED.birth_date,sus_card = EXCLUDED.sus_card,phone = EXCLUDED.phone,status = EXCLUDED.status,is_tfd = EXCLUDED.is_tfd,address = EXCLUDED.address,neighborhood = EXCLUDED.neighborhood,city = EXCLUDED.city,reference_point = EXCLUDED.reference_point,emergency_contact = EXCLUDED.emergency_contact,medical_notes = EXCLUDED.medical_notes,allows_companion = EXCLUDED.allows_companion,companion_name = EXCLUDED.companion_name;
INSERT INTO patients (id,name,cpf,birth_date,sus_card,phone,status,is_tfd,address,neighborhood,city,reference_point,emergency_contact,medical_notes,allows_companion,companion_name) VALUES ($$p7$$,$$MARIA JOSÉ OLIVEIRA$$,$$888.222.111-44$$,$$1950-02-14$$,$$700000000000007$$,$$(99) 98777-0007$$,$$active$$,true,$$Av. Perimetral, 500$$,$$Americanos$$,$$Coroatá$$,$$$$,$$Carlos (Filho)$$,$$Catarata.$$,true,$$CARLOS OLIVEIRA$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,cpf = EXCLUDED.cpf,birth_date = EXCLUDED.birth_date,sus_card = EXCLUDED.sus_card,phone = EXCLUDED.phone,status = EXCLUDED.status,is_tfd = EXCLUDED.is_tfd,address = EXCLUDED.address,neighborhood = EXCLUDED.neighborhood,city = EXCLUDED.city,reference_point = EXCLUDED.reference_point,emergency_contact = EXCLUDED.emergency_contact,medical_notes = EXCLUDED.medical_notes,allows_companion = EXCLUDED.allows_companion,companion_name = EXCLUDED.companion_name;
INSERT INTO patients (id,name,cpf,birth_date,sus_card,phone,status,is_tfd,address,neighborhood,city,reference_point,emergency_contact,medical_notes,allows_companion) VALUES ($$p8$$,$$JOÃO MOTORISTA (SERVIDOR)$$,$$000.000.000-99$$,$$1980-01-01$$,$$$$,$$(99) 99999-9999$$,$$active$$,false,$$Secretaria de Saúde$$,$$Centro$$,$$Coroatá$$,$$$$,$$$$,$$$$,false) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,cpf = EXCLUDED.cpf,birth_date = EXCLUDED.birth_date,sus_card = EXCLUDED.sus_card,phone = EXCLUDED.phone,status = EXCLUDED.status,is_tfd = EXCLUDED.is_tfd,address = EXCLUDED.address,neighborhood = EXCLUDED.neighborhood,city = EXCLUDED.city,reference_point = EXCLUDED.reference_point,emergency_contact = EXCLUDED.emergency_contact,medical_notes = EXCLUDED.medical_notes,allows_companion = EXCLUDED.allows_companion;
INSERT INTO patients (id,name,cpf,birth_date,sus_card,phone,status,is_tfd,address,neighborhood,city,reference_point,emergency_contact,medical_notes,allows_companion) VALUES ($$p9$$,$$TEREZA CRISTINA$$,$$111.555.999-77$$,$$1990-10-10$$,$$700000000000009$$,$$(99) 98888-1234$$,$$inactive$$,true,$$Rua da Palmeira$$,$$Mocó$$,$$Coroatá$$,$$$$,$$$$,$$Alta médica.$$,false) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,cpf = EXCLUDED.cpf,birth_date = EXCLUDED.birth_date,sus_card = EXCLUDED.sus_card,phone = EXCLUDED.phone,status = EXCLUDED.status,is_tfd = EXCLUDED.is_tfd,address = EXCLUDED.address,neighborhood = EXCLUDED.neighborhood,city = EXCLUDED.city,reference_point = EXCLUDED.reference_point,emergency_contact = EXCLUDED.emergency_contact,medical_notes = EXCLUDED.medical_notes,allows_companion = EXCLUDED.allows_companion;

CREATE TABLE IF NOT EXISTS users (id TEXT PRIMARY KEY);
ALTER TABLE users ADD COLUMN IF NOT EXISTS name TEXT;
ALTER TABLE users ADD COLUMN IF NOT EXISTS login TEXT;
ALTER TABLE users ADD COLUMN IF NOT EXISTS role TEXT;
ALTER TABLE users ADD COLUMN IF NOT EXISTS password TEXT;
ALTER TABLE users ADD COLUMN IF NOT EXISTS permissions JSONB;
DELETE FROM users WHERE login = $$admin$$;
INSERT INTO users (id,name,login,role,password,permissions) VALUES ($$1$$,$$Administrador TFD$$,$$admin$$,$$ADMIN$$,$$123$$,$$["view_dashboard","view_patients","manage_patients","view_appointments","manage_appointments","view_trips","manage_trips","view_stays","manage_stays","view_financial","manage_financial","view_resources","manage_resources","view_reports"]$$::jsonb) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,login = EXCLUDED.login,role = EXCLUDED.role,password = EXCLUDED.password,permissions = EXCLUDED.permissions;
DELETE FROM users WHERE login = $$atendente$$;
INSERT INTO users (id,name,login,role,password,permissions) VALUES ($$2$$,$$Atendente Regulação$$,$$atendente$$,$$ATTENDANT$$,$$123$$,$$["view_dashboard","view_patients","manage_patients","view_appointments","manage_appointments","view_trips","manage_trips","view_stays","manage_stays","view_resources","manage_resources","view_reports"]$$::jsonb) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,login = EXCLUDED.login,role = EXCLUDED.role,password = EXCLUDED.password,permissions = EXCLUDED.permissions;
DELETE FROM users WHERE login = $$motorista$$;
INSERT INTO users (id,name,login,role,password,permissions) VALUES ($$3$$,$$Motorista Plantão$$,$$motorista$$,$$DRIVER$$,$$123$$,$$["view_trips"]$$::jsonb) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,login = EXCLUDED.login,role = EXCLUDED.role,password = EXCLUDED.password,permissions = EXCLUDED.permissions;

CREATE TABLE IF NOT EXISTS trips (id TEXT PRIMARY KEY);
ALTER TABLE trips ADD COLUMN IF NOT EXISTS date DATE;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS time TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS origin TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS destination TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS treatment_id TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS treatment_name TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS vehicle_id TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS vehicle_model TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS vehicle_plate TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS driver_id TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS driver_name TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS total_seats INTEGER;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS occupied_seats INTEGER;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS status TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS notes TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS accountability_status TEXT;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS extra_expenses JSONB;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS passengers JSONB;
INSERT INTO trips (id,date,time,origin,destination,treatment_id,treatment_name,vehicle_id,vehicle_model,vehicle_plate,driver_id,driver_name,total_seats,occupied_seats,status,notes,accountability_status,extra_expenses,passengers) VALUES ($$trip_caxias_today$$,$$2025-12-16$$,$$04:30$$,$$Secretaria de Saúde$$,$$Caxias (Clínica Renal)$$,$$1$$,$$Hemodiálise$$,$$v1$$,$$Van Renault Master$$,$$PTA-2024$$,$$d1$$,$$SEU ZÉ (JOSÉ ALMEIDA)$$,15,4,$$Embarque$$,$$Pacientes de rotina.$$,$$pending$$,$$[]$$::jsonb,$$[{"id":"t1_p1","tripId":"trip_caxias_today","patientId":"p1","patientName":"ANTÔNIO RAIMUNDO SILVA","isCompanion":false,"status":"boarded","origin":"Centro","destination":"Clínica de Nefrologia","isRoundTrip":true},{"id":"t1_p1_c","tripId":"trip_caxias_today","patientId":"p1","patientName":"MARIA SILVA","isCompanion":true,"relatedPatientId":"p1","relatedPatientName":"ANTÔNIO RAIMUNDO","status":"boarded","origin":"Centro","destination":"Clínica de Nefrologia","isRoundTrip":true},{"id":"t1_p2","tripId":"trip_caxias_today","patientId":"p2","patientName":"JOSEFA PEREIRA SANTOS","isCompanion":false,"status":"boarded","origin":"Americanos","destination":"Clínica de Nefrologia","isRoundTrip":true},{"id":"t1_p3","tripId":"trip_caxias_today","patientId":"p3","patientName":"CARLOS ALBERTO COSTA","isCompanion":false,"status":"missing","origin":"Trizidela","destination":"Clínica de Nefrologia","isRoundTrip":true}]$$::jsonb) ON CONFLICT (id) DO UPDATE SET date = EXCLUDED.date,time = EXCLUDED.time,origin = EXCLUDED.origin,destination = EXCLUDED.destination,treatment_id = EXCLUDED.treatment_id,treatment_name = EXCLUDED.treatment_name,vehicle_id = EXCLUDED.vehicle_id,vehicle_model = EXCLUDED.vehicle_model,vehicle_plate = EXCLUDED.vehicle_plate,driver_id = EXCLUDED.driver_id,driver_name = EXCLUDED.driver_name,total_seats = EXCLUDED.total_seats,occupied_seats = EXCLUDED.occupied_seats,status = EXCLUDED.status,notes = EXCLUDED.notes,accountability_status = EXCLUDED.accountability_status,extra_expenses = EXCLUDED.extra_expenses,passengers = EXCLUDED.passengers;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t1_p1$$,$$trip_caxias_today$$,$$p1$$,$$ANTÔNIO RAIMUNDO SILVA$$,false,$$boarded$$,$$Centro$$,$$Clínica de Nefrologia$$,true) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t1_p1_c$$,$$trip_caxias_today$$,$$p1$$,$$MARIA SILVA$$,true,$$boarded$$,$$Centro$$,$$Clínica de Nefrologia$$,true) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t1_p2$$,$$trip_caxias_today$$,$$p2$$,$$JOSEFA PEREIRA SANTOS$$,false,$$boarded$$,$$Americanos$$,$$Clínica de Nefrologia$$,true) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t1_p3$$,$$trip_caxias_today$$,$$p3$$,$$CARLOS ALBERTO COSTA$$,false,$$missing$$,$$Trizidela$$,$$Clínica de Nefrologia$$,true) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trips (id,date,time,origin,destination,treatment_id,treatment_name,vehicle_id,vehicle_model,vehicle_plate,driver_id,driver_name,total_seats,occupied_seats,status,notes,accountability_status,extra_expenses,passengers) VALUES ($$trip_slz_tomorrow$$,$$2025-12-17$$,$$03:00$$,$$Praça da Matriz$$,$$São Luís (Hospitais)$$,$$2$$,$$Oncologia/Vários$$,$$v2$$,$$Micro-ônibus Volare$$,$$COR-5050$$,$$d3$$,$$ROBERTO CARLOS$$,26,5,$$Agendada$$,$$Levar documentos para regulação estadual.$$,$$pending$$,$$[]$$::jsonb,$$[{"id":"t2_p4","tripId":"trip_slz_tomorrow","patientId":"p4","patientName":"LUCAS GABRIEL (CRIANÇA)","isCompanion":false,"status":"confirmed","origin":"Mocó","destination":"H. Aldenora Bello","isRoundTrip":false},{"id":"t2_p4_c1","tripId":"trip_slz_tomorrow","patientId":"p4","patientName":"ANA PAULA (MÃE)","isCompanion":true,"relatedPatientId":"p4","relatedPatientName":"LUCAS GABRIEL","status":"confirmed","origin":"Mocó","destination":"H. Aldenora Bello","isRoundTrip":false},{"id":"t2_p4_c2","tripId":"trip_slz_tomorrow","patientId":"p4","patientName":"JOSÉ SOUZA (PAI)","isCompanion":true,"relatedPatientId":"p4","relatedPatientName":"LUCAS GABRIEL","status":"confirmed","origin":"Mocó","destination":"H. Aldenora Bello","isRoundTrip":false},{"id":"t2_p5","tripId":"trip_slz_tomorrow","patientId":"p5","patientName":"RAIMUNDA NONATA LIMA","isCompanion":false,"status":"confirmed","origin":"Centro","destination":"H. Aldenora Bello","isRoundTrip":true},{"id":"t2_p5_c","tripId":"trip_slz_tomorrow","patientId":"p5","patientName":"RITA LIMA","isCompanion":true,"relatedPatientId":"p5","relatedPatientName":"RAIMUNDA NONATA","status":"confirmed","origin":"Centro","destination":"H. Aldenora Bello","isRoundTrip":true}]$$::jsonb) ON CONFLICT (id) DO UPDATE SET date = EXCLUDED.date,time = EXCLUDED.time,origin = EXCLUDED.origin,destination = EXCLUDED.destination,treatment_id = EXCLUDED.treatment_id,treatment_name = EXCLUDED.treatment_name,vehicle_id = EXCLUDED.vehicle_id,vehicle_model = EXCLUDED.vehicle_model,vehicle_plate = EXCLUDED.vehicle_plate,driver_id = EXCLUDED.driver_id,driver_name = EXCLUDED.driver_name,total_seats = EXCLUDED.total_seats,occupied_seats = EXCLUDED.occupied_seats,status = EXCLUDED.status,notes = EXCLUDED.notes,accountability_status = EXCLUDED.accountability_status,extra_expenses = EXCLUDED.extra_expenses,passengers = EXCLUDED.passengers;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t2_p4$$,$$trip_slz_tomorrow$$,$$p4$$,$$LUCAS GABRIEL (CRIANÇA)$$,false,$$confirmed$$,$$Mocó$$,$$H. Aldenora Bello$$,false) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t2_p4_c1$$,$$trip_slz_tomorrow$$,$$p4$$,$$ANA PAULA (MÃE)$$,true,$$confirmed$$,$$Mocó$$,$$H. Aldenora Bello$$,false) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t2_p4_c2$$,$$trip_slz_tomorrow$$,$$p4$$,$$JOSÉ SOUZA (PAI)$$,true,$$confirmed$$,$$Mocó$$,$$H. Aldenora Bello$$,false) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t2_p5$$,$$trip_slz_tomorrow$$,$$p5$$,$$RAIMUNDA NONATA LIMA$$,false,$$confirmed$$,$$Centro$$,$$H. Aldenora Bello$$,true) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t2_p5_c$$,$$trip_slz_tomorrow$$,$$p5$$,$$RITA LIMA$$,true,$$confirmed$$,$$Centro$$,$$H. Aldenora Bello$$,true) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trips (id,date,time,origin,destination,treatment_id,treatment_name,vehicle_id,vehicle_model,vehicle_plate,driver_id,driver_name,total_seats,occupied_seats,status,notes,accountability_status,extra_expenses,passengers) VALUES ($$trip_codo_yesterday$$,$$2025-12-15$$,$$07:00$$,$$Secretaria$$,$$Codó (HGM)$$,$$4$$,$$Oftalmologia$$,$$v3$$,$$Fiat Spin$$,$$OAB-1234$$,$$d2$$,$$DONA LÚCIA$$,6,2,$$Concluída$$,$$Estrada com buracos na MA-020.$$,$$approved$$,$$[{"id":"ex1","description":"Abastecimento","amount":150,"type":"fuel","date":"2025-12-15","status":"approved"}]$$::jsonb,$$[{"id":"t3_p7","tripId":"trip_codo_yesterday","patientId":"p7","patientName":"MARIA JOSÉ OLIVEIRA","isCompanion":false,"status":"boarded","origin":"Americanos","destination":"HGM Codó","isRoundTrip":true},{"id":"t3_p7_c","tripId":"trip_codo_yesterday","patientId":"p7","patientName":"CARLOS OLIVEIRA","isCompanion":true,"relatedPatientId":"p7","relatedPatientName":"MARIA JOSÉ","status":"boarded","origin":"Americanos","destination":"HGM Codó","isRoundTrip":true}]$$::jsonb) ON CONFLICT (id) DO UPDATE SET date = EXCLUDED.date,time = EXCLUDED.time,origin = EXCLUDED.origin,destination = EXCLUDED.destination,treatment_id = EXCLUDED.treatment_id,treatment_name = EXCLUDED.treatment_name,vehicle_id = EXCLUDED.vehicle_id,vehicle_model = EXCLUDED.vehicle_model,vehicle_plate = EXCLUDED.vehicle_plate,driver_id = EXCLUDED.driver_id,driver_name = EXCLUDED.driver_name,total_seats = EXCLUDED.total_seats,occupied_seats = EXCLUDED.occupied_seats,status = EXCLUDED.status,notes = EXCLUDED.notes,accountability_status = EXCLUDED.accountability_status,extra_expenses = EXCLUDED.extra_expenses,passengers = EXCLUDED.passengers;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t3_p7$$,$$trip_codo_yesterday$$,$$p7$$,$$MARIA JOSÉ OLIVEIRA$$,false,$$boarded$$,$$Americanos$$,$$HGM Codó$$,true) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t3_p7_c$$,$$trip_codo_yesterday$$,$$p7$$,$$CARLOS OLIVEIRA$$,true,$$boarded$$,$$Americanos$$,$$HGM Codó$$,true) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO extra_expenses (id,trip_id,description,amount,type,date,status) VALUES ($$ex1$$,$$trip_codo_yesterday$$,$$Abastecimento$$,150,$$fuel$$,$$2025-12-15$$,$$approved$$) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,description=EXCLUDED.description,amount=EXCLUDED.amount,type=EXCLUDED.type,date=EXCLUDED.date,status=EXCLUDED.status;
INSERT INTO trips (id,date,time,origin,destination,treatment_id,treatment_name,vehicle_id,vehicle_model,vehicle_plate,driver_id,driver_name,total_seats,occupied_seats,status,notes,accountability_status,extra_expenses,passengers) VALUES ($$trip_timbiras_next$$,$$2025-12-23$$,$$06:00$$,$$Secretaria$$,$$Timbiras (HGT)$$,$$3$$,$$Ortopedia$$,$$v3$$,$$Fiat Spin$$,$$OAB-1234$$,$$d2$$,$$DONA LÚCIA$$,6,2,$$Agendada$$,$$Retorno Dr. Osmar$$,$$pending$$,$$[]$$::jsonb,$$[{"id":"t4_p6","tripId":"trip_timbiras_next","patientId":"p6","patientName":"FRANCISCO DAS CHAGAS","isCompanion":false,"status":"confirmed","origin":"Trizidela","destination":"HGT","isRoundTrip":true},{"id":"t4_p6_c","tripId":"trip_timbiras_next","patientId":"p6","patientName":"SOCORRO CHAGAS","isCompanion":true,"relatedPatientId":"p6","relatedPatientName":"FRANCISCO","status":"confirmed","origin":"Trizidela","destination":"HGT","isRoundTrip":true}]$$::jsonb) ON CONFLICT (id) DO UPDATE SET date = EXCLUDED.date,time = EXCLUDED.time,origin = EXCLUDED.origin,destination = EXCLUDED.destination,treatment_id = EXCLUDED.treatment_id,treatment_name = EXCLUDED.treatment_name,vehicle_id = EXCLUDED.vehicle_id,vehicle_model = EXCLUDED.vehicle_model,vehicle_plate = EXCLUDED.vehicle_plate,driver_id = EXCLUDED.driver_id,driver_name = EXCLUDED.driver_name,total_seats = EXCLUDED.total_seats,occupied_seats = EXCLUDED.occupied_seats,status = EXCLUDED.status,notes = EXCLUDED.notes,accountability_status = EXCLUDED.accountability_status,extra_expenses = EXCLUDED.extra_expenses,passengers = EXCLUDED.passengers;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t4_p6$$,$$trip_timbiras_next$$,$$p6$$,$$FRANCISCO DAS CHAGAS$$,false,$$confirmed$$,$$Trizidela$$,$$HGT$$,true) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;
INSERT INTO trip_passengers (id,trip_id,patient_id,patient_name,is_companion,status,origin,destination,is_round_trip) VALUES ($$t4_p6_c$$,$$trip_timbiras_next$$,$$p6$$,$$SOCORRO CHAGAS$$,true,$$confirmed$$,$$Trizidela$$,$$HGT$$,true) ON CONFLICT (id) DO UPDATE SET trip_id=EXCLUDED.trip_id,patient_id=EXCLUDED.patient_id,patient_name=EXCLUDED.patient_name,is_companion=EXCLUDED.is_companion,status=EXCLUDED.status,origin=EXCLUDED.origin,destination=EXCLUDED.destination,is_round_trip=EXCLUDED.is_round_trip;

CREATE TABLE IF NOT EXISTS appointments (id TEXT PRIMARY KEY);
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS patient_id TEXT;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS patient_name TEXT;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS treatment_id TEXT;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS treatment_name TEXT;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS destination_id TEXT;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS destination_name TEXT;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS date DATE;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS time TEXT;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS notes TEXT;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS status TEXT;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS trip_id TEXT;
ALTER TABLE appointments ADD COLUMN IF NOT EXISTS is_return BOOLEAN;
INSERT INTO appointments (id,patient_id,patient_name,treatment_id,treatment_name,destination_id,destination_name,date,time,notes,status,trip_id,is_return) VALUES ($$a1$$,$$p1$$,$$ANTÔNIO RAIMUNDO SILVA$$,$$1$$,$$Hemodiálise$$,$$2$$,$$Clínica de Nefrologia de Caxias$$,$$2025-12-16$$,$$08:00$$,$$Sessão 1$$,$$scheduled_trip$$,$$trip_caxias_today$$,false) ON CONFLICT (id) DO UPDATE SET patient_id = EXCLUDED.patient_id,patient_name = EXCLUDED.patient_name,treatment_id = EXCLUDED.treatment_id,treatment_name = EXCLUDED.treatment_name,destination_id = EXCLUDED.destination_id,destination_name = EXCLUDED.destination_name,date = EXCLUDED.date,time = EXCLUDED.time,notes = EXCLUDED.notes,status = EXCLUDED.status,trip_id = EXCLUDED.trip_id,is_return = EXCLUDED.is_return;
INSERT INTO appointments (id,patient_id,patient_name,treatment_id,treatment_name,destination_id,destination_name,date,time,notes,status,trip_id,is_return) VALUES ($$a2$$,$$p2$$,$$JOSEFA PEREIRA SANTOS$$,$$1$$,$$Hemodiálise$$,$$2$$,$$Clínica de Nefrologia de Caxias$$,$$2025-12-16$$,$$08:30$$,$$$$,$$scheduled_trip$$,$$trip_caxias_today$$,false) ON CONFLICT (id) DO UPDATE SET patient_id = EXCLUDED.patient_id,patient_name = EXCLUDED.patient_name,treatment_id = EXCLUDED.treatment_id,treatment_name = EXCLUDED.treatment_name,destination_id = EXCLUDED.destination_id,destination_name = EXCLUDED.destination_name,date = EXCLUDED.date,time = EXCLUDED.time,notes = EXCLUDED.notes,status = EXCLUDED.status,trip_id = EXCLUDED.trip_id,is_return = EXCLUDED.is_return;
INSERT INTO appointments (id,patient_id,patient_name,treatment_id,treatment_name,destination_id,destination_name,date,time,notes,status,trip_id,is_return) VALUES ($$a3$$,$$p4$$,$$LUCAS GABRIEL$$,$$2$$,$$Oncologia$$,$$1$$,$$Hospital Aldenora Bello$$,$$2025-12-17$$,$$09:00$$,$$Quimioterapia e Exames$$,$$scheduled_trip$$,$$trip_slz_tomorrow$$,false) ON CONFLICT (id) DO UPDATE SET patient_id = EXCLUDED.patient_id,patient_name = EXCLUDED.patient_name,treatment_id = EXCLUDED.treatment_id,treatment_name = EXCLUDED.treatment_name,destination_id = EXCLUDED.destination_id,destination_name = EXCLUDED.destination_name,date = EXCLUDED.date,time = EXCLUDED.time,notes = EXCLUDED.notes,status = EXCLUDED.status,trip_id = EXCLUDED.trip_id,is_return = EXCLUDED.is_return;
INSERT INTO appointments (id,patient_id,patient_name,treatment_id,treatment_name,destination_id,destination_name,date,time,notes,status,trip_id,is_return) VALUES ($$a4$$,$$p5$$,$$RAIMUNDA NONATA LIMA$$,$$2$$,$$Oncologia$$,$$1$$,$$Hospital Aldenora Bello$$,$$2025-12-17$$,$$10:00$$,$$Consulta Dr. Tarquínio$$,$$scheduled_trip$$,$$trip_slz_tomorrow$$,false) ON CONFLICT (id) DO UPDATE SET patient_id = EXCLUDED.patient_id,patient_name = EXCLUDED.patient_name,treatment_id = EXCLUDED.treatment_id,treatment_name = EXCLUDED.treatment_name,destination_id = EXCLUDED.destination_id,destination_name = EXCLUDED.destination_name,date = EXCLUDED.date,time = EXCLUDED.time,notes = EXCLUDED.notes,status = EXCLUDED.status,trip_id = EXCLUDED.trip_id,is_return = EXCLUDED.is_return;
INSERT INTO appointments (id,patient_id,patient_name,treatment_id,treatment_name,destination_id,destination_name,date,time,notes,status,is_return) VALUES ($$a5$$,$$p4$$,$$LUCAS GABRIEL$$,$$5$$,$$Neuropediatria$$,$$5$$,$$Casa de Apoio Ninar$$,$$2025-12-18$$,$$14:00$$,$$Avaliação$$,$$pending$$,false) ON CONFLICT (id) DO UPDATE SET patient_id = EXCLUDED.patient_id,patient_name = EXCLUDED.patient_name,treatment_id = EXCLUDED.treatment_id,treatment_name = EXCLUDED.treatment_name,destination_id = EXCLUDED.destination_id,destination_name = EXCLUDED.destination_name,date = EXCLUDED.date,time = EXCLUDED.time,notes = EXCLUDED.notes,status = EXCLUDED.status,is_return = EXCLUDED.is_return;
INSERT INTO appointments (id,patient_id,patient_name,treatment_id,treatment_name,destination_id,destination_name,date,time,notes,status,trip_id,is_return) VALUES ($$a6$$,$$p7$$,$$MARIA JOSé OLIVEIRA$$,$$4$$,$$Oftalmologia$$,$$3$$,$$HGM Codó$$,$$2025-12-15$$,$$08:00$$,$$Cirurgia realizada$$,$$completed$$,$$trip_codo_yesterday$$,false) ON CONFLICT (id) DO UPDATE SET patient_id = EXCLUDED.patient_id,patient_name = EXCLUDED.patient_name,treatment_id = EXCLUDED.treatment_id,treatment_name = EXCLUDED.treatment_name,destination_id = EXCLUDED.destination_id,destination_name = EXCLUDED.destination_name,date = EXCLUDED.date,time = EXCLUDED.time,notes = EXCLUDED.notes,status = EXCLUDED.status,trip_id = EXCLUDED.trip_id,is_return = EXCLUDED.is_return;

CREATE TABLE IF NOT EXISTS patient_payments (id TEXT PRIMARY KEY);
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS patient_id TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS patient_name TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS cpf TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS date DATE;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS hospital TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS specialty TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS account_holder TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS holder_cpf TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS bank_name TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS agency TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS account_number TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS has_companion BOOLEAN;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS meal_value INTEGER;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS companion_value INTEGER;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS trip_qty INTEGER;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS total_value INTEGER;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS reference_month TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS reference_year TEXT;
ALTER TABLE patient_payments ADD COLUMN IF NOT EXISTS status TEXT;
INSERT INTO patient_payments (id,patient_id,patient_name,cpf,date,hospital,specialty,account_holder,holder_cpf,bank_name,agency,account_number,has_companion,meal_value,companion_value,trip_qty,total_value,reference_month,reference_year,status) VALUES ($$pay1$$,$$p4$$,$$LUCAS GABRIEL$$,$$055.666.777-88$$,$$2025-12-17$$,$$H. Aldenora Bello$$,$$Oncologia$$,$$ANA PAULA SOUZA (MÃE)$$,$$000.000.000-11$$,$$BB$$,$$1111$$,$$22222$$,true,20,40,1,60,$$11$$,$$2024$$,$$pending$$) ON CONFLICT (id) DO UPDATE SET patient_id = EXCLUDED.patient_id,patient_name = EXCLUDED.patient_name,cpf = EXCLUDED.cpf,date = EXCLUDED.date,hospital = EXCLUDED.hospital,specialty = EXCLUDED.specialty,account_holder = EXCLUDED.account_holder,holder_cpf = EXCLUDED.holder_cpf,bank_name = EXCLUDED.bank_name,agency = EXCLUDED.agency,account_number = EXCLUDED.account_number,has_companion = EXCLUDED.has_companion,meal_value = EXCLUDED.meal_value,companion_value = EXCLUDED.companion_value,trip_qty = EXCLUDED.trip_qty,total_value = EXCLUDED.total_value,reference_month = EXCLUDED.reference_month,reference_year = EXCLUDED.reference_year,status = EXCLUDED.status;

CREATE TABLE IF NOT EXISTS patient_stays (id TEXT PRIMARY KEY);
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS patient_id TEXT;
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS patient_name TEXT;
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS support_house_id TEXT;
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS support_house_name TEXT;
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS entry_date DATE;
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS entry_time TEXT;
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS expected_exit_date DATE;
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS has_companion BOOLEAN;
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS companion_name TEXT;
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS notes TEXT;
ALTER TABLE patient_stays ADD COLUMN IF NOT EXISTS status TEXT;
INSERT INTO patient_stays (id,patient_id,patient_name,support_house_id,support_house_name,entry_date,entry_time,expected_exit_date,has_companion,companion_name,notes,status) VALUES ($$s1$$,$$p4$$,$$LUCAS GABRIEL$$,$$1$$,$$Casa de Apoio Coroatá em SLZ$$,$$2025-12-17$$,$$07:00$$,$$2025-12-18$$,true,$$ANA PAULA + JOSÉ$$,$$Ficarão até terminar os exames.$$,$$active$$) ON CONFLICT (id) DO UPDATE SET patient_id = EXCLUDED.patient_id,patient_name = EXCLUDED.patient_name,support_house_id = EXCLUDED.support_house_id,support_house_name = EXCLUDED.support_house_name,entry_date = EXCLUDED.entry_date,entry_time = EXCLUDED.entry_time,expected_exit_date = EXCLUDED.expected_exit_date,has_companion = EXCLUDED.has_companion,companion_name = EXCLUDED.companion_name,notes = EXCLUDED.notes,status = EXCLUDED.status;

CREATE TABLE IF NOT EXISTS institution (id TEXT PRIMARY KEY);
ALTER TABLE institution ADD COLUMN IF NOT EXISTS name TEXT;
ALTER TABLE institution ADD COLUMN IF NOT EXISTS subtitle TEXT;
ALTER TABLE institution ADD COLUMN IF NOT EXISTS address TEXT;
ALTER TABLE institution ADD COLUMN IF NOT EXISTS city TEXT;
ALTER TABLE institution ADD COLUMN IF NOT EXISTS state TEXT;
ALTER TABLE institution ADD COLUMN IF NOT EXISTS phone TEXT;
ALTER TABLE institution ADD COLUMN IF NOT EXISTS email TEXT;
ALTER TABLE institution ADD COLUMN IF NOT EXISTS logo TEXT;
INSERT INTO institution (id,name,subtitle,address,city,state,phone,email,logo) VALUES ($$gen_tomt7796$$,$$PREFEITURA MUNICIPAL DE COROATÁ$$,$$SECRETARIA MUNICIPAL DE SAÚDE - TFD$$,$$Av. Magalhães de Almeida, S/N$$,$$Coroatá$$,$$MA$$,$$(99) 3641-1122$$,$$tfd@coroata.ma.gov.br$$,$$$$) ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name,subtitle = EXCLUDED.subtitle,address = EXCLUDED.address,city = EXCLUDED.city,state = EXCLUDED.state,phone = EXCLUDED.phone,email = EXCLUDED.email,logo = EXCLUDED.logo;

